{
  "kind": "build_request",
  "title": "Allow uploading any audio file for song snippet uploads",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Update the Song Snippet upload flow (My Profile → Snippets → Upload Snippet) to accept and successfully upload audio files even when the browser does not provide a reliable MIME type (e.g., `file.type` is empty or not `audio/*`), while still rejecting clearly non-audio files.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-allow-audio"
        ],
        "quotes": [
          "Allow it to upload any audio file"
        ]
      },
      "acceptanceCriteria": [
        "In `frontend/src/pages/MyProfilePage.tsx`, selecting an audio file with a missing/empty `file.type` no longer triggers the 'Please select an audio file' error if the filename extension indicates an audio format.",
        "The upload dialog file picker is configured to allow broad audio selection (not limited by browsers that only filter by MIME type), and users can pick common audio extensions such as .mp3, .wav, .m4a, .aac, .ogg, .flac, .webm.",
        "Clearly non-audio files (e.g., .png, .pdf) are rejected with an English error message.",
        "Uploading a newly-accepted audio file results in a successful call to `publishSongSnippet` and the snippet appears in the list with a playable `<audio>` control."
      ]
    }
  ],
  "constraints": [
    "Do not edit files under `frontend/src/components/ui` (read-only components).",
    "Do not modify immutable frontend hook paths listed in SYSTEM_CONTEXT.",
    "Backend must remain a single-actor Motoko canister (`backend/main.mo`)."
  ],
  "nonGoals": [
    "Changing the 10MB max file size limit (unless required to support the audio file acceptance change).",
    "Adding non-audio uploads (video, images, documents).",
    "Adding third-party storage or CDN integrations."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}